<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WalzShop — Top Up Game</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="page">

  <!-- HEADER GAME -->
  <header class="game-header">
    <img id="gameBanner" class="game-banner" alt="Banner Game" />
    <div class="game-info">
      <h1 id="gameTitle"></h1>
      <a href="index.html" class="btn-back">← Kembali</a>
    </div>
  </header>

  <!-- FORM TOPUP -->
  <main class="container">
    <section class="card">
      <h2>Masukkan Data</h2>
      <div id="userInputs"></div>
    </section>

    <section class="card">
      <h2>Pilih Produk</h2>
      <div id="productsGrid" class="products-grid"></div>
    </section>

    <section class="card">
      <h2>Voucher Promo</h2>
      <input type="text" id="voucherInput" placeholder="Masukkan kode voucher" />
      <button onclick="applyVoucher()">Gunakan</button>
    </section>

    <section class="card">
      <h2>Metode Pembayaran</h2>
      <div id="paymentsGrid" class="payments-grid"></div>
    </section>

    <section class="card">
      <h2>Ringkasan</h2>
      <p id="summary">Belum ada produk dipilih</p>
      <button class="btn-buy" onclick="checkout()">Beli Sekarang</button>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="container">
    <p>© 2025 <strong>WalzShop</strong>. Instan & Terpercaya ✅</p>
  </footer>

  <script src="script.js"></script>
  <script>
    // Ambil nama game dari URL (?game=free fire)
    const params = new URLSearchParams(window.location.search);
    const gameKey = params.get("game");

    // Cari game di database script.js
    const game = GAMES.find(g => g.key === gameKey);

    if (game) {
      // Render header
      document.getElementById("gameTitle").textContent = game.name;
      document.getElementById("gameBanner").src = game.img;

      // Render input user ID / server (jika perlu)
      let inputsHTML = `<label>ID Player:</label><input type="text" id="userId" placeholder="Masukkan ID">`;
      if (game.needServer) {
        inputsHTML += `<label>Server:</label><input type="text" id="serverId" placeholder="Masukkan Server">`;
      }
      document.getElementById("userInputs").innerHTML = inputsHTML;

      // Render produk
      const products = PRODUCTS[game.key] || [];
      document.getElementById("productsGrid").innerHTML = products.map(p => `
        <div class="product-card" onclick="selectProduct('${game.key}', '${p.id}')">
          <h4>${p.label}</h4>
          <p>Rp ${p.price.toLocaleString()}</p>
          ${p.badge ? `<span class="badge">${p.badge}</span>` : ""}
        </div>
      `).join("");

      // Render metode pembayaran
      document.getElementById("paymentsGrid").innerHTML = PAYMENTS.map(p => `
        <div class="payment-card" onclick="selectPayment('${p.key}')">
          <img src="${p.img}" alt="${p.name}">
          <p>${p.name}</p>
        </div>
      `).join("");
    } else {
      document.querySelector("main").innerHTML = "<p>Game tidak ditemukan.</p>";
    }
  </script>
</body>
</html>